<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reset Password</title>
  <link rel="stylesheet" href="login.css">
  
  <!-- GSAP + Icons (same as login.html) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js"></script>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js"></script>
</head>

<body>
 <body class="reset-container">
    <div class="wrapper">
        <div class="login-box">
            <h2>Reset Password</h2>

            <div class="input-box">
                <span class="icon"><ion-icon name="mail"></ion-icon></span>
                <input type="email" id="resetEmail" required>
                <label>Enter your email</label>
            </div>

            <button id="resetBtn">Send Reset Link</button>

            <div class="register-link">
                <p><a href="javascript:void(0)" onclick="portalRedirect('login.html')">Back to Login</a></p>
            </div>
        </div>
    </div>
</body>
  <script>
/* ---- Portal Exit Animation ---- */
function portalRedirect(url) {
  const portal = document.createElement("div");
  portal.style.position = "fixed";
  portal.style.top = "50%";
  portal.style.left = "50%";
  portal.style.width = "200vmax";
  portal.style.height = "200vmax";
  portal.style.background = "radial-gradient(circle, rgba(72,0,255,0.9), rgba(0,195,255,0.8), rgba(0,0,0,1))";
  portal.style.borderRadius = "50%";
  portal.style.transform = "translate(-50%, -50%) scale(0)";
  portal.style.opacity = "0";
  portal.style.zIndex = "9999";

  document.body.appendChild(portal);

  gsap.to(portal, {
    scale: 3,
    opacity: 1,
    duration: 1.2,
    ease: "power4.inOut",
    onComplete: () => (window.location.href = url)
  });
}
</script>
  <!-- Reuse your existing login.js -->

  <div id="popup" 
     style="
        display:none;
        position:fixed;
        top:50%;
        left:50%;
        transform:translate(-50%, -50%);
        padding:20px 25px;
        background:white;
        border-radius:10px;
        color:black;
        z-index:9999;
        font-size:1em;
        box-shadow:0 0 15px rgba(0,0,0,0.4);
        text-align:center;
     ">
  Reset link sent successfully!
</div>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

  // --- Your Firebase Config ---
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  /* Firebase Config */
  const firebaseConfig = {
    apiKey: "AIzaSyB8F-3r-4iPmacTlGrcNNCxpHiGswoaQ5g",
    authDomain: "webora-core-16d65.firebaseapp.com",
    projectId: "webora-core-16d65",
    storageBucket: "webora-core-16d65.appspot.com",
    messagingSenderId: "734418138539",
    appId: "1:734418138539:web:d4b6e2cf73662e6f1f4eee"
  };

  // --- Initialize ---
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const resetBtn = document.getElementById("resetBtn");
  const resetEmail = document.getElementById("resetEmail");
  const popup = document.getElementById("popup");

  resetBtn.addEventListener("click", () => {
    const email = resetEmail.value.trim();

    if (!email) {
      showPopup("Please enter email!");
      return;
    }

    sendPasswordResetEmail(auth, email)
      .then(() => {
        showPopup("Reset link sent successfully!");
      })
      .catch(err => {
        let msg = "Error sending link.";

        if (err.code === "auth/user-not-found") msg = "No account found!";
        if (err.code === "auth/invalid-email") msg = "Invalid email!";

        showPopup(msg);
        console.log(err);
      });
  });

  function showPopup(text) {
    popup.textContent = text;
    popup.style.display = "block";

    setTimeout(() => popup.style.display = "none", 3000);
  }
</script>
<script type="module" src="presence.js"></script>
</body>

</html>